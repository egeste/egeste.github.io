<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
<head>
  <!-- ===== BASIC META ===== -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- ===== SEO PLUGIN (Jekyll SEO Tag) ===== -->
  {% seo %}
  
  <!-- ===== CANONICAL & ALTERNATE ===== -->
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ '/feed.xml' | relative_url }}">
  
  <!-- ===== FAVICONS & ICONS ===== -->
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/images/favicon.svg' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
  <link rel="manifest" href="{{ '/manifest.json' | relative_url }}">
  
  <!-- ===== PRECONNECTS FOR PERFORMANCE ===== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- ===== STYLESHEETS ===== -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- ===== SITE METADATA ===== -->
  <meta name="theme-color" content="{{ site.site_config.primary_color }}">
  <meta name="msapplication-TileColor" content="{{ site.site_config.primary_color }}">
  <meta name="application-name" content="{{ site.title }}">
  <meta name="content-type" content="{{ site.content_settings.content_type }}">
  <meta name="target-audience" content="{{ site.content_settings.target_audience }}">
  <meta name="last-major-update" content="{{ site.content_settings.last_update }}">
  
  <!-- Enhanced OpenGraph -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="{{ site.lang | default: 'en_US' }}">
  <meta property="og:type" content="{{ page.type | default: 'website' }}">
  <meta property="og:updated_time" content="{{ site.time | date_to_xmlschema }}">
  
  {% if page.date %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    <meta property="article:author" content="{{ site.author.name }}">
    {% if page.categories %}
      {% for category in page.categories %}
        <meta property="article:section" content="{{ category }}">
      {% endfor %}
    {% endif %}
    {% if page.tags %}
      {% for tag in page.tags %}
        <meta property="article:tag" content="{{ tag }}">
      {% endfor %}
    {% endif %}
  {% endif %}
  
  {% if page.type == 'profile' %}
    <meta property="profile:first_name" content="{{ site.author.first_name }}">
    <meta property="profile:last_name" content="{{ site.author.last_name }}">
    <meta property="profile:username" content="{{ site.author.username }}">
  {% endif %}
  
  <!-- Twitter Card Enhanced -->
  <meta name="twitter:site" content="@{{ site.twitter.username }}">
  <meta name="twitter:creator" content="@{{ site.twitter.username }}">
  
  <!-- ===== LOCATION & CONTACT ===== -->
  <meta name="geo.region" content="{{ site.site_config.geographic_region }}">
  <meta name="geo.placename" content="{{ site.site_config.city }}">
  <meta name="ICBM" content="{{ site.site_config.coordinates }}">
  <meta name="contact-email" content="{{ site.site_config.contact_email }}">
  
  <!-- Content categorization -->
  <meta name="keywords" content="{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.author.skills | join: ', ' }}, Engineering Leadership, {{ site.professional.location }}{% endif %}">
  
  {% if page.excerpt %}
    <meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}">
  {% endif %}
  
  <!-- Accessibility improvements -->
  <style>
    .skip-link {
      position: absolute;
      top: -100px;
      left: 6px;
      background: #000;
      color: #fff;
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 1000;
    }
    .skip-link:focus {
      top: 6px;
    }
    
    /* Ensure focus indicators are visible */
    *:focus {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      .achievement-item, .skill-category {
        border: 2px solid currentColor !important;
      }
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
  
  <!-- ===== SEO & AI OPTIMIZATION ===== -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="ai-content-declaration" content="human-authored">
  <meta name="content-categories" content="{{ site.content_settings.categories | join: ', ' }}">
  <meta name="professional-status" content="{{ site.professional.status }}">
  <meta name="expertise-domains" content="{{ site.professional.key_skills | join: ', ' }}">
  <meta name="seeking-roles" content="{{ site.professional.seeking_roles | join: ', ' }}">
  
  <!-- ===== STRUCTURED DATA ===== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": ["Person", "SoftwareEngineer"],
    "name": "{{ site.author.name }}",
    "url": "{{ site.url }}",
    "email": "{{ site.site_config.contact_email }}",
    "jobTitle": "{{ site.professional.current_role }}",
    "description": "{{ site.author.bio | strip_html | strip_newlines }}",
    "worksFor": {
      "@type": "Organization",
      "name": "{{ site.professional.current_company }}"
    },
    "knowsAbout": {{ site.professional.key_skills | jsonify }},
    "award": {{ site.professional.achievements | jsonify }},
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "{{ site.site_config.city }}",
      "addressRegion": "{{ site.site_config.state }}"
    },
    "sameAs": {{ site.social.links | jsonify }},
    "seeks": {
      "@type": "JobPosting",
      "title": "{{ site.professional.seeking_roles | join: ', ' }} Roles",
      "jobLocation": {
        "@type": "Place",
        "name": "{{ site.professional.work_locations | join: ' or ' }}"
      }
    }
  }
  </script>
</head>
<body>
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <!-- Animated mesh background -->
  <div class="mesh-background" aria-hidden="true">
    <canvas id="mesh-canvas"></canvas>
  </div>

  <div class="site-container">
    <header class="site-header" role="banner">
      <nav class="nav-container" role="navigation" aria-label="Main navigation">
        <div class="nav-brand">
          <a href="{{ '/' | relative_url }}" class="brand-link" aria-label="{{ site.author.name }} - Home">
            <span class="brand-name">{{ site.title }}</span>
          </a>
        </div>
        <div class="nav-links">
          <a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}" {% if page.url == '/' %}aria-current="page"{% endif %}>Home</a>
          <a href="{{ '/projects' | relative_url }}" class="nav-link {% if page.url contains 'projects' %}active{% endif %}" {% if page.url contains 'projects' %}aria-current="page"{% endif %}>Projects</a>
          <a href="{{ '/blog' | relative_url }}" class="nav-link {% if page.url contains 'blog' %}active{% endif %}" {% if page.url contains 'blog' %}aria-current="page"{% endif %}>Blog</a>
          <a href="{{ '/faq' | relative_url }}" class="nav-link {% if page.url contains 'faq' %}active{% endif %}" {% if page.url contains 'faq' %}aria-current="page"{% endif %}>FAQ</a>
          <a href="mailto:{{ site.social.email }}" class="nav-link nav-cta btn btn-primary-cta" aria-label="Contact {{ site.author.name }} via email">Contact</a>
        </div>
      </nav>
    </header>

    <main class="site-main" id="main-content" role="main" tabindex="-1">
      {{ content }}
    </main>

    <footer class="site-footer" role="contentinfo">
      <div class="footer-content">
        <p>&copy; {{ 'now' | date: '%Y' }} {{ site.title }}. All rights reserved.</p>
      </div>
    </footer>
  </div>

  <script>
    // Animated mesh network background
    class MeshNetwork {
      constructor() {
        this.canvas = document.getElementById('mesh-canvas');
        this.ctx = this.canvas.getContext('2d');
        this.nodes = [];
        this.maxNodes = 80;
        this.maxDistance = 300;
        this.animationId = null;
        
        this.init();
        this.createNodes();
        this.animate();
        this.handleResize();
        this.handleClicks();
      }
      
      init() {
        this.resize();
      }
      
      resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
      }
      
      createNodes() {
        this.nodes = [];
        for (let i = 0; i < this.maxNodes; i++) {
          this.nodes.push(this.createNode());
        }
      }
      
      createNode(x = null, y = null) {
        const now = Date.now();
        return {
          x: x !== null ? x : Math.random() * this.canvas.width,
          y: y !== null ? y : Math.random() * this.canvas.height,
          vx: (Math.random() - 0.5) * 0.8,
          vy: (Math.random() - 0.5) * 0.8,
          radius: Math.random() * 3 + 1.5,
          birthTime: now,
          lifetime: Math.random() * 25000 + 5000, // 5-30 seconds
          opacity: 0,
          fadeInDuration: 1000, // 1 second fade in
          fadeOutDuration: 2000 // 2 second fade out
        };
      }
      
      updateNodes() {
        const now = Date.now();
        
        // Update existing nodes
        for (let i = this.nodes.length - 1; i >= 0; i--) {
          const node = this.nodes[i];
          
          // Update position
          node.x += node.vx;
          node.y += node.vy;
          
          // Bounce off edges
          if (node.x < 0 || node.x > this.canvas.width) node.vx *= -1;
          if (node.y < 0 || node.y > this.canvas.height) node.vy *= -1;
          
          // Update opacity based on lifetime
          const age = now - node.birthTime;
          const timeUntilDeath = node.lifetime - age;
          
          if (age < node.fadeInDuration) {
            // Fading in
            node.opacity = age / node.fadeInDuration;
          } else if (timeUntilDeath < node.fadeOutDuration) {
            // Fading out
            node.opacity = Math.max(0, timeUntilDeath / node.fadeOutDuration);
          } else {
            // Fully visible
            node.opacity = 1;
          }
          
          // Remove dead nodes
          if (age >= node.lifetime) {
            this.nodes.splice(i, 1);
          }
        }
        
        // Only add new nodes if we're below the target count
        // This allows natural equilibrium through organic death cycles
        if (this.nodes.length < this.maxNodes) {
          this.nodes.push(this.createNode());
        }
      }
      
      drawNodes() {
        this.nodes.forEach(node => {
          if (node.opacity <= 0) return;
          
          // Outer glow
          this.ctx.beginPath();
          this.ctx.arc(node.x, node.y, node.radius + 2, 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(139, 92, 246, ${0.2 * node.opacity})`;
          this.ctx.fill();
          
          // Main node
          this.ctx.beginPath();
          this.ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(139, 92, 246, ${0.8 * node.opacity})`;
          this.ctx.fill();
        });
      }
      
      drawConnections() {
        for (let i = 0; i < this.nodes.length; i++) {
          for (let j = i + 1; j < this.nodes.length; j++) {
            const nodeA = this.nodes[i];
            const nodeB = this.nodes[j];
            
            // Skip if either node is invisible
            if (nodeA.opacity <= 0 || nodeB.opacity <= 0) continue;
            
            const dx = nodeA.x - nodeB.x;
            const dy = nodeA.y - nodeB.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < this.maxDistance) {
              const distanceOpacity = (1 - distance / this.maxDistance) * 0.6;
              const nodeOpacity = Math.min(nodeA.opacity, nodeB.opacity);
              const finalOpacity = distanceOpacity * nodeOpacity;
              
              this.ctx.strokeStyle = `rgba(139, 92, 246, ${finalOpacity})`;
              this.ctx.lineWidth = 1;
              this.ctx.beginPath();
              this.ctx.moveTo(nodeA.x, nodeA.y);
              this.ctx.lineTo(nodeB.x, nodeB.y);
              this.ctx.stroke();
            }
          }
        }
      }
      
      animate() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.updateNodes();
        this.drawConnections();
        this.drawNodes();
        this.animationId = requestAnimationFrame(() => this.animate());
      }
      
      handleResize() {
        window.addEventListener('resize', () => {
          this.resize();
          this.createNodes();
        });
      }
      
      handleClicks() {
        document.addEventListener('click', (event) => {
          // Get mouse position relative to the viewport
          const x = event.clientX;
          const y = event.clientY;
          this.addNode(x, y);
        });
      }
      
      addNode(x, y) {
        this.nodes.push(this.createNode(x, y));
      }
      
      destroy() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
        }
      }
    }
    
    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const mesh = new MeshNetwork();
      
      // Handle reduced motion preference
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        mesh.destroy();
        document.querySelector('.mesh-background').style.display = 'none';
      }
    });
  </script>
</body>
</html>